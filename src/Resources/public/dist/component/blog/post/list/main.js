define(["text!./list.html"],function(a){var b={templates:{list:a}};return{defaults:b,header:{title:"news.headline",underline:!1,toolbar:{buttons:{add:{},deleteSelected:{}}}},layout:{content:{width:"max"}},initialize:function(){this.render(),this.bindDomEvents(),this.bindCustomEvents()},render:function(){this.$el.html(this.templates.list()),this.sandbox.sulu.initListToolbarAndList.call(this,"post","/admin/api/hiccup-sulu-blog/post-fields",{el:this.$find("#list-toolbar-container"),instanceName:"post",template:this.sandbox.sulu.buttons.get({settings:{options:{dropdownItems:[{type:"columnOptions"}]}}})},{el:this.sandbox.dom.find("#data-list"),url:"/admin/api/hiccup-sulu-blog/posts",searchInstanceName:"post",searchFields:["title","headline","content"],resultKey:"data-items",instanceName:"post",actionCallback:this.toEdit.bind(this),viewOptions:{table:{actionIconColumn:"title"}}})},toEdit:function(a){this.sandbox.emit("sulu.router.navigate","blog/posts:"+a+"/edit")},toAdd:function(){this.sandbox.emit("sulu.router.navigate","blog/add-posts")},deleteItems:function(a){for(var b=0,c=a.length;c>b;b++)this.deleteItem(a[b])},deleteItem:function(a){this.sandbox.util.save("/admin/api/hiccup-sulu-blog/posts/"+a,"DELETE").then(function(){this.sandbox.emit("husky.datagrid.post.record.remove",a)}.bind(this))},bindDomEvents:function(){},bindCustomEvents:function(){this.sandbox.on("sulu.toolbar.add",this.toAdd.bind(this)),this.sandbox.on("husky.datagrid.post.number.selections",function(a){var b=a>0?"enable":"disable";this.sandbox.emit("sulu.header.toolbar.item."+b,"deleteSelected",!1)}.bind(this)),this.sandbox.on("sulu.toolbar.delete",function(){this.sandbox.emit("husky.datagrid.post.items.get-selected",this.deleteItems.bind(this))}.bind(this))}}});